(this["webpackJsonpreact-konva-graphs"]=this["webpackJsonpreact-konva-graphs"]||[]).push([[0],{38:function(t,e,a){},85:function(t,e,a){"use strict";a.r(e);var o=a(0),r=a(1),n=a.n(r),i=a(33),d=a.n(i),l=(a(38),a(8)),c=a(2),s=a(12),u=a(10),h=function(t){var e=t.data,a=e.name,r=e.value,n=e.x,i=e.y;return Object(o.jsxs)(c.Group,{x:n,y:i,children:[Object(o.jsx)(c.Rect,{width:100,height:50,fill:"rgba(0,0,0,0.9)",cornerRadius:8}),Object(o.jsx)(c.Text,{fill:"#fff",text:a||"",fontStyle:"bold",x:10,y:8}),Object(o.jsx)(c.Text,{fill:"#fff",text:r||"",x:10,y:24})]})},b=function(t){var e=t.data,a=t.width,r=t.height,i=t.options,d=n.a.useState({x:null,y:null,dataPlotted:null,label:null}),b=Object(l.a)(d,2),j=b[0],x=b[1],g=n.a.useState(!1),v=Object(l.a)(g,2),O=v[0],f=v[1],p=n.a.useRef(),w=void 0===i.showGrid||i.showGrid,y=Object(u.a)(),k=e.labels,H=e.datasets.data,S=Math.min.apply(Math,Object(s.a)(H)),C=Math.max.apply(Math,Object(s.a)(H)),m=C;Math.abs(S)>C&&(m=Math.abs(S));var F=Math.ceil(m/H.length),M=F.toString().length;M>1&&(F=parseInt(F/Math.pow(10,M-1))*Math.pow(10,M-1));var I=0,T="",R=F,A=Math.ceil(C/F),G=Math.ceil(-S/F),D=A,W=e.labels.length,E=a/W,L=r/D;m>1e7?(I=1e6,T="M"):m>1e4?(I=1e3,T="K"):(I=1,T="");var B=function(t){p.current.getLayer().batchDraw()},P=function(){var t=-G;return Object(s.a)(Array(D+1)).map((function(e,n){console.log("looping");var i=r-n*L,d=Object(u.a)(),l=t*R/I;return console.log(),l=l.toString()+T,t++,w?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(c.Line,{listening:!1,id:d,points:[-5,i,0,i,a,i],strokeWidth:.9,stroke:"#c1c1c1"},d),Object(o.jsx)(c.Text,{text:l,y:i-10,x:-40,fill:"#000"})]}):Object(o.jsx)(c.Text,{text:l,y:i-10,x:-40,fill:"#000"})}))},U=function(){return Object(s.a)(Array(D)).map((function(t,e){console.log("looping");var n=a-e*E,i=Object(u.a)();return console.log("show grid ",w),w?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(c.Line,{listening:!1,id:i,points:[n,0,n,r,n],strokeWidth:.9,stroke:"#c1c1c1"},i),Object(o.jsx)(c.Text,{text:k[e],x:n-E,y:r+5,fill:"#000"})]}):Object(o.jsx)(c.Text,{text:k[e],x:n-E,y:r+5,fill:"#000"})}))},V=function(t){t.groupId;var e=D*R;return k.map((function(t,a){var n=H[a]/e,i=70*E/100,d=n*r,l=E*a+(E-i)/2,s=r-d,h=Object(u.a)();return Object(o.jsx)(c.Rect,{id:h,width:i,height:d,x:l,y:s,fill:"rgba(255,99,132,0.2)",stroke:"rgba(255,99,132,1)",onMouseOver:function(t){return function(t,e,a,o){f(!0),console.log(t.evt),x({x:t.evt.pageX+E/2,y:t.evt.pageY-20,value:a,name:o}),t.target.setAttrs({stroke:"rgba(255,99,132,1)",fill:"rgba(255,99,132,0.4)"}),console.log(O),B()}(t,0,H[a],k[a])},onMouseOut:function(t){return function(t,e){console.log("out"),f(!1),t.target.setAttrs({stroke:"rgba(255,99,132,1)",fill:"rgba(255,99,132,0.2)"}),x({x:t.evt.pageX,y:t.evt.pageY}),B()}(t)}},h)}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(c.Group,{x:60,y:60,id:y,ref:p,draggable:!0,children:[Object(o.jsx)(c.Rect,{fill:"#fff",width:a,height:r,onClick:function(){return f(!1)}}),Object(o.jsx)(P,{}),Object(o.jsx)(U,{}),Object(o.jsx)(V,{groupId:y})]}),O&&Object(o.jsx)(h,{data:j})]})},j=a(17),x=function(t){var e=t.width,a=t.height,n=t.radius,i=void 0===n?100:n,d=t.data,s=t.total,u=t.rotation,b=(t.totalInput,Object(r.useState)({didHover:!1,position:null,data:null})),j=Object(l.a)(b,2),x=j[0],g=j[1],v=function(t){g({didHover:!1,data:null})};return Object(o.jsxs)(r.Fragment,{children:[Object(o.jsx)(c.Wedge,{name:d.product,x:e/4,y:a/2,radius:i,angle:360/s*d.value,fill:d.backgroundColor,stroke:x.didHover?d.strokeColor:null,strokeWidth:x.didHover?d.strokeWidth:null,rotation:u,onMouseOver:function(t){g({didHover:!0,data:{x:i+20,y:0,name:d.label,value:d.value}})},onMouseOut:v,onMouseDown:v,scaleX:x.didHover?1.1:1,scaleY:x.didHover?1.1:1,shadowEnabled:!0,opacity:x.didHover?.8:1,shadowColor:x.didHover?"black":"transparent",shadowBlur:x.didHover?10:0,shadowOpacity:x.didHover?.6:0,shadowOffsetX:x.didHover?10:0,shadowOffsetY:x.didHover?10:0}),x.didHover&&Object(o.jsx)(h,{data:x.data})]})},g=function(t){t.idx;var e=t.width,a=(t.height,t.radius,t.data),r=t.position;t.totalInput;return Object(o.jsxs)(c.Group,{x:r.x,y:r.y,children:[Object(o.jsx)(c.Rect,{width:15,height:10,fill:a.backgroundColor,stroke:"black",strokeWidth:1}),Object(o.jsx)(c.Text,{text:a.label.slice(0,1).toUpperCase()+a.label.slice(1),x:e/10+15,width:400})]})},v=function(t){t.groupValue;var e=t.groupValue,a=e.x,n=e.y,i=e.height,d=e.width,s=e.dataArray,b=e.label,j=t.isSelected,v=t.onSelect,O=(t.onChange,Object(r.useState)({didHover:!1})),f=Object(l.a)(O,2),p=f[0],w=f[1],y=Object(r.useState)(!1),k=Object(l.a)(y,2),H=(k[0],k[1]),S=Object(r.useState)(null),C=Object(l.a)(S,2),m=C[0],F=C[1],M=Object(r.useRef)(),I=Object(r.useRef)();Object(r.useEffect)((function(){j&&(I.current.nodes([M.current]),I.current.getLayer().batchDraw())}),[j]);var T=s.reduce((function(t,e){return t+e.value}),0),R=0,A=function(t,e){if(s.length-1===t){var a=R;return R=0,a}var o=R;return R+=360/T*e.value,o},G=0,D=50,W=0,E=function(t,e){var a=document.createElement("canvas").getContext("2d").measureText(t.label).width;G>d&&(G=0,W++);var o=G;return G=o+a+D,{x:o,y:20*W}};return console.log("rerende"),Object(o.jsxs)(r.Fragment,{children:[Object(o.jsxs)(c.Group,{x:a,y:n,height:i,width:d,draggable:!0,onClick:v,onTap:v,ref:M,children:[Object(o.jsx)(c.Rect,{x:0,width:d+D,height:i+D,fill:"rgba(255,255,255,0.0)"}),b?Object(o.jsx)(c.Text,{x:d/2-D,y:-50,fontSize:20,text:b}):null,Object(o.jsx)(c.Group,{children:s.map((function(t,e){return Object(o.jsx)(g,{idx:e,width:d/3,height:i,data:t,position:E(t),totalInput:s.length},Object(u.a)())}))}),Object(o.jsx)(c.Group,{x:d/2-D,y:20*W+D,children:s.map((function(t,e){return Object(o.jsx)(x,{idx:e,width:2*d/3,height:i,radius:2*d/3>i/2?i/2:d/3,data:t,total:T,rotation:A(e,t),totalInput:s.length,setHoverData:w,setShowToolTip:H,prevHoverId:m,setPreviousHoverId:F},Object(u.a)())}))})]}),p.didHover?Object(o.jsx)(h,{data:null===p||void 0===p?void 0:p.data}):null,j&&Object(o.jsx)(c.Transformer,{ref:I,boundBoxFunc:function(t,e){return e.width<50||e.height<50?t:e}})]})},O=window.Konva,f=function(t){var e,a=t.id,n=t.data,i=t.width,d=t.height,c=(t.options,t.x),s=t.y,u=t.selectedId,h=(t.selectShape,Object(r.useState)({id:a,x:c,y:s,width:i,height:d,label:n.datasets.label,dataArray:(e=n,e.labels.reduce((function(t,a,o){var r;return t.push({label:a,value:e.datasets.data[o],backgroundColor:(null===e||void 0===e||null===(r=e.datasets)||void 0===r?void 0:r.backgroundColor)&&e.datasets.backgroundColor[o]?e.datasets.backgroundColor[o]:O.Util.getRandomColor()}),t}),[]))})),b=Object(l.a)(h,2),x=b[0],g=b[1];return Object(r.useEffect)((function(){g((function(t){return Object(j.a)({},t)}))}),[]),Object(o.jsx)(r.Fragment,{children:Object(o.jsx)(v,{groupValue:x,isSelected:x.id===u,onChange:function(t){g(t)}})})},p=function(t){var e=t.width,a=t.height,n=t.radius,i=void 0===n?100:n,d=t.data,s=t.total,u=t.rotation,b=(t.totalInput,Object(r.useState)({didHover:!1,position:null,data:null})),j=Object(l.a)(b,2),x=j[0],g=j[1],v=function(t){g({didHover:!1,data:null})};return Object(o.jsxs)(r.Fragment,{children:[Object(o.jsx)(c.Arc,{name:d.product,x:e/4,y:a/2,outerRadius:i,innerRadius:i/1.5,angle:360/s*d.value,fill:d.backgroundColor,stroke:x.didHover?d.strokeColor:null,strokeWidth:x.didHover?d.strokeWidth:null,rotation:u,onMouseOver:function(t){g({didHover:!0,data:{x:i+20,y:0,name:d.label,value:d.value}})},onMouseOut:v,onMouseDown:v,scaleX:x.didHover?1.1:1,scaleY:x.didHover?1.1:1,shadowEnabled:!0,opacity:x.didHover?.8:1,shadowColor:x.didHover?"black":"transparent",shadowBlur:x.didHover?10:0,shadowOpacity:x.didHover?.6:0,shadowOffsetX:x.didHover?10:0,shadowOffsetY:x.didHover?10:0}),x.didHover&&Object(o.jsx)(h,{data:x.data})]})},w=function(t){t.idx;var e=t.width,a=(t.height,t.data),r=t.position;t.totalInput;return Object(o.jsxs)(c.Group,{x:r.x,y:r.y,children:[Object(o.jsx)(c.Rect,{width:15,height:10,fill:a.backgroundColor,stroke:"black",strokeWidth:1}),Object(o.jsx)(c.Text,{text:a.label.slice(0,1).toUpperCase()+a.label.slice(1),x:e/10+15,width:400})]})},y=function(t){t.groupValue;var e=t.groupValue,a=e.x,n=e.y,i=e.height,d=e.width,s=e.dataArray,b=e.label,j=t.isSelected,x=t.onSelect,g=(t.onChange,Object(r.useState)({didHover:!1})),v=Object(l.a)(g,2),O=v[0],f=v[1],y=Object(r.useState)(!1),k=Object(l.a)(y,2),H=(k[0],k[1]),S=Object(r.useState)(null),C=Object(l.a)(S,2),m=C[0],F=C[1],M=Object(r.useRef)(),I=Object(r.useRef)();Object(r.useEffect)((function(){j&&(I.current.nodes([M.current]),I.current.getLayer().batchDraw())}),[j]);var T=s.reduce((function(t,e){return t+e.value}),0),R=0,A=function(t,e){if(s.length-1===t){var a=R;return R=0,a}var o=R;return R+=360/T*e.value,o},G=0,D=50,W=0,E=function(t,e){var a=document.createElement("canvas").getContext("2d").measureText(t.label).width;G>d&&(G=0,W++);var o=G;return G=o+a+D,{x:o,y:20*W}};return console.log("rerende"),Object(o.jsxs)(r.Fragment,{children:[Object(o.jsxs)(c.Group,{x:a,y:n,height:i,width:d,draggable:!0,onClick:x,onTap:x,ref:M,children:[Object(o.jsx)(c.Rect,{x:0,width:d+D,height:i+D,fill:"rgba(255,255,255,0.0)"}),b?Object(o.jsx)(c.Text,{x:d/2-D,y:-50,fontSize:20,text:b}):null,Object(o.jsx)(c.Group,{children:s.map((function(t,e){return Object(o.jsx)(w,{idx:e,width:d/3,height:i,data:t,position:E(t),totalInput:s.length},Object(u.a)())}))}),Object(o.jsx)(c.Group,{x:d/2-D,y:20*W+D,children:s.map((function(t,e){return Object(o.jsx)(p,{idx:e,width:2*d/3,height:i,radius:2*d/3>i/2?i/2:d/3,data:t,total:T,rotation:A(e,t),totalInput:s.length,setHoverData:f,setShowToolTip:H,prevHoverId:m,setPreviousHoverId:F},Object(u.a)())}))})]}),O.didHover?Object(o.jsx)(h,{data:null===O||void 0===O?void 0:O.data}):null,j&&Object(o.jsx)(c.Transformer,{ref:I,boundBoxFunc:function(t,e){return e.width<50||e.height<50?t:e}})]})},k=window.Konva,H=function(t){var e,a=t.id,n=t.data,i=t.width,d=t.height,c=(t.options,t.x),s=t.y,u=t.selectedId,h=(t.selectShape,Object(r.useState)({id:a,x:c,y:s,width:i,height:d,label:n.datasets.label,dataArray:(e=n,e.labels.reduce((function(t,a,o){var r;return t.push({label:a,value:e.datasets.data[o],backgroundColor:(null===e||void 0===e||null===(r=e.datasets)||void 0===r?void 0:r.backgroundColor)&&e.datasets.backgroundColor[o]?e.datasets.backgroundColor[o]:k.Util.getRandomColor()}),t}),[]))})),b=Object(l.a)(h,2),x=b[0],g=b[1];return Object(r.useEffect)((function(){g((function(t){return Object(j.a)({},t)}))}),[]),Object(o.jsx)(r.Fragment,{children:Object(o.jsx)(y,{groupValue:x,isSelected:x.id===u,onChange:function(t){g(t)}})})};var S=function(){var t={labels:["Saudi Arabia","Russia","Iraq","United Arab Emirates","Canada","India","China","Fiji","North Korea","USA","Ghana","Rwanda","DRK","Chile","Nepal","Spain"],datasets:{label:"Population ",data:[133.3,86.2,52.2,51.2,50.2,20.2,40.6,10.2,.7,9,20,90,3,30,40,60],backgroundColor:["#FF6384","#63FF84","#84FF63","#8463FF","#6384FF"]}},e=Object(r.useState)(null),a=Object(l.a)(e,2),n=a[0],i=a[1],d=function(t){t.target===t.target.getStage()&&i(null)};return Object(o.jsx)(c.Stage,{width:window.innerWidth,height:window.innerHeight,onMouseDown:d,onTouchStart:d,children:Object(o.jsxs)(c.Layer,{children:[Object(o.jsx)(b,{data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:{label:"Population",backgroundColor:[],data:[6300,200,5520,3760,9,320,819,1308,405,2101,640,1999]},hoverBorderColor:"red",borderWidth:1},width:600,height:400,x:0,y:0,options:{responsive:!0}}),Object(o.jsx)(f,{height:200,width:200,x:700,y:100,data:t,options:{responsive:!0},selectShape:i,selectedId:n}),Object(o.jsx)(H,{height:200,width:200,x:950,y:100,data:t,options:{responsive:!0},selectShape:i,selectedId:n})]})})},C=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,86)).then((function(e){var a=e.getCLS,o=e.getFID,r=e.getFCP,n=e.getLCP,i=e.getTTFB;a(t),o(t),r(t),n(t),i(t)}))};d.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(S,{})}),document.getElementById("root")),C()}},[[85,1,2]]]);
//# sourceMappingURL=main.36588ef4.chunk.js.map